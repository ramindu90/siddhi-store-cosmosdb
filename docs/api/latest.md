# API Docs - v1.0.0-SNAPSHOT

!!! Info "Tested Siddhi Core version: *<a target="_blank" href="http://siddhi.io/en/v5.1/docs/query-guide/">5.1.5</a>*"
    It could also support other Siddhi Core minor versions.

## Store

### cosmosdb *<a target="_blank" href="http://siddhi.io/en/v5.1/docs/query-guide/#store">(Store)</a>*
<p></p>
<p style="word-wrap: break-word;margin: 0;">Using this extension a Cosmos DB Event Table can be configured to persist events in a Cosmos DB of user's choice. Create, update, delete, find and contains operations can be performed on document collections in Cosmos DB using this extension.</p>
<p></p>
<span id="syntax" class="md-typeset" style="display: block; font-weight: bold;">Syntax</span>

```
@Store(type="cosmosdb", uri="<STRING>", access.key="<STRING>", database.name="<STRING>", collection.name="<STRING>", custom.request.options="<STRING>", is.disable.ru.per.minute.usage="<STRING>", offer.enable.ru.per.minute.throughput="<STRING>", partition.key="<STRING>", offer.throughput="<STRING>", offer.type="<STRING>", resource.token.expiry.seconds="<STRING>", session.token="<STRING>", indexing.directive="<STRING>", access.condition.type="<STRING>", access.condition="<STRING>", pre.trigger.include="<STRING>", post.trigger.include="<STRING>", disable.automatic.id.generation="<STRING>", partition.key.range.id="<STRING>", is.enable.scan.in.query="<STRING>", is.emit.verbose.traces.in.query="<STRING>", is.enable.cross.partition.query="<STRING>", max.degree.of.parallelism="<STRING>", max.buffered.item.count="<STRING>", response.continuation.token.limit.in.kb="<STRING>")
@PrimaryKey("PRIMARY_KEY")
@Index("INDEX")
```

<span id="query-parameters" class="md-typeset" style="display: block; color: rgba(0, 0, 0, 0.54); font-size: 12.8px; font-weight: bold;">QUERY PARAMETERS</span>
<table>
    <tr>
        <th>Name</th>
        <th style="min-width: 20em">Description</th>
        <th>Default Value</th>
        <th>Possible Data Types</th>
        <th>Optional</th>
        <th>Dynamic</th>
    </tr>
    <tr>
        <td style="vertical-align: top">uri</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">The Cosmos DB uri for the Cosmos DB data store. The uri must be of the format <br>&nbsp;https://{databaseaccount}.documents.azure.com/dbs/{db}</p></td>
        <td style="vertical-align: top"></td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">No</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">access.key</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">The Access key for the Cosmos DB data store generated by the Cosmos DB.</p></td>
        <td style="vertical-align: top"></td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">No</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">database.name</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">The name of the Cosmos DB database containing this event table. A database in Azure Cosmos DB is a logical container for document collections and users. </p></td>
        <td style="vertical-align: top"></td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">No</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">collection.name</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">The name of the collection in the store this Event Table should be persisted as. A collection is a named logical container for JSON documents.</p></td>
        <td style="vertical-align: top">Name of the siddhi event table.</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">custom.request.options</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">This parameter configures custom options for create, update and delete requests. Expected format '&lt;key&gt;:&lt;value&gt;,&lt;key&gt;:&lt;value&gt;'.e.g., 'offerThroughput:500,scriptLoggingEnabled:true'.</p></td>
        <td style="vertical-align: top">null</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">is.disable.ru.per.minute.usage</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">is.disable.ru.per.minute.usage is used to enable/disable Request Units(RUs)/minute capacity to serve the request if regular provisioned RUs/second is exhausted. Possible values are 'true' or 'false'.</p></td>
        <td style="vertical-align: top">false</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">offer.enable.ru.per.minute.throughput</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">Sets offerEnableRUPerMinuteThroughput for a collection in the Azure Cosmos DB database service. Possible values are 'true' or 'false'.</p></td>
        <td style="vertical-align: top">false</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">partition.key</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">Sets the partition key used to identify the current request's target partition.</p></td>
        <td style="vertical-align: top">null</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">offer.throughput</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">Sets the throughput in the form of Request Units per second when creating a document collection. Possible values for this parameter are positive integers.</p></td>
        <td style="vertical-align: top">null</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">offer.type</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">Sets the offer type when creating a document collection.</p></td>
        <td style="vertical-align: top">null</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">resource.token.expiry.seconds</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">Sets the expiry time for resource token. Used when creating, updating, reading permission. Possible values for this parameter are positive integers.</p></td>
        <td style="vertical-align: top">null</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">session.token</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">Sets the token for use with session consistency.</p></td>
        <td style="vertical-align: top">null</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">indexing.directive</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">Specifies whether or not the resource is to be indexed in the Azure Cosmos DB database service. Possible values are 'Default', 'Include' or 'Exclude'.</p></td>
        <td style="vertical-align: top">null</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">access.condition.type</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">Specifies the set of access condition types that can be used for operations in the Azure Cosmos DB database service. Possible values are 'IfMatch' or 'IfNoneMatch'.</p></td>
        <td style="vertical-align: top">null</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">access.condition</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">Sets the value of the condition - for AccessConditionType IfMatchs and IfNotMatch, this is the ETag that has to be compared to.</p></td>
        <td style="vertical-align: top">null</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">pre.trigger.include</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">Sets the triggers to be invoked before the operation.</p></td>
        <td style="vertical-align: top">null</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">post.trigger.include</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">Sets the triggers to be invoked after the operation.</p></td>
        <td style="vertical-align: top">null</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">disable.automatic.id.generation</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">Sets whether Ids are auto generated by the Cosmos DB for documents. Possible values are 'true' or 'false'.</p></td>
        <td style="vertical-align: top">false</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">partition.key.range.id</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">Sets the partitionKeyRangeId on query options.</p></td>
        <td style="vertical-align: top">null</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">is.enable.scan.in.query</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">Sets the option to allow scan on the queries which couldn't be served as indexing was opted out on the requested paths. Possible values are 'true' or 'false'.</p></td>
        <td style="vertical-align: top">false</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">is.emit.verbose.traces.in.query</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">Sets the option to allow queries to emit out verbose traces for investigation.</p></td>
        <td style="vertical-align: top">false</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">is.enable.cross.partition.query</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">Sets the option to allow queries to run across all partitions of the collection.</p></td>
        <td style="vertical-align: top">false</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">max.degree.of.parallelism</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">Sets the number of concurrent operations run client side during parallel query execution.</p></td>
        <td style="vertical-align: top">0</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">max.buffered.item.count</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">Sets the maximum number of items that can be buffered client side during parallel query execution.</p></td>
        <td style="vertical-align: top">0</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">response.continuation.token.limit.in.kb</td>
        <td style="vertical-align: top; word-wrap: break-word"><p style="word-wrap: break-word;margin: 0;">Sets the ResponseContinuationTokenLimitInKb feed option for document query requests in the Azure Cosmos DB service. ResponseContinuationTokenLimitInKb is used to limit the length of continuation token in the query response. Valid values are &gt;= 1.</p></td>
        <td style="vertical-align: top">0</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
</table>

<span id="system-parameters" class="md-typeset" style="display: block; font-weight: bold;">System Parameters</span>
<table>
    <tr>
        <th>Name</th>
        <th style="min-width: 20em">Description</th>
        <th>Default Value</th>
        <th>Possible Parameters</th>
    </tr>
    <tr>
        <td style="vertical-align: top">requestTimeout</td>
        <td style="vertical-align: top;"><p style="word-wrap: break-word;margin: 0;">Sets the request timeout (time to wait for response from network peer) in seconds.</p></td>
        <td style="vertical-align: top">60</td>
        <td style="vertical-align: top">any positive integer</td>
    </tr>
    <tr>
        <td style="vertical-align: top">directRequestTimeout</td>
        <td style="vertical-align: top;"><p style="word-wrap: break-word;margin: 0;">Sets the direct mode request timeout (time to wait for response from network peer) in seconds. This only applies to requests that talk directly to the backend. </p></td>
        <td style="vertical-align: top">5</td>
        <td style="vertical-align: top">any positive integer</td>
    </tr>
    <tr>
        <td style="vertical-align: top">mediaRequestTimeout</td>
        <td style="vertical-align: top;"><p style="word-wrap: break-word;margin: 0;">Sets time to wait for response from network peer for attachment content (aka media) operations in seconds.</p></td>
        <td style="vertical-align: top">300</td>
        <td style="vertical-align: top">any positive integer</td>
    </tr>
    <tr>
        <td style="vertical-align: top">connectionMode</td>
        <td style="vertical-align: top;"><p style="word-wrap: break-word;margin: 0;">Sets the connection mode used in the client. Direct and Gateway connectivity modes are supported</p></td>
        <td style="vertical-align: top">Gateway</td>
        <td style="vertical-align: top">Gateway<br>DirectHttps</td>
    </tr>
    <tr>
        <td style="vertical-align: top">mediaReadMode</td>
        <td style="vertical-align: top;"><p style="word-wrap: break-word;margin: 0;">Sets the attachment content (aka media) download mode.</p></td>
        <td style="vertical-align: top">Buffered</td>
        <td style="vertical-align: top">Buffered<br>Streamed</td>
    </tr>
    <tr>
        <td style="vertical-align: top">maxPoolSize</td>
        <td style="vertical-align: top;"><p style="word-wrap: break-word;margin: 0;">Sets the value of the connection pool size of the httpclient.</p></td>
        <td style="vertical-align: top">100</td>
        <td style="vertical-align: top">any positive integer</td>
    </tr>
    <tr>
        <td style="vertical-align: top">idleConnectionTimeout</td>
        <td style="vertical-align: top;"><p style="word-wrap: break-word;margin: 0;">Sets the value of the timeout for an idle connection in seconds. After that time, the connection will be automatically closed.</p></td>
        <td style="vertical-align: top">60</td>
        <td style="vertical-align: top">any positive integer</td>
    </tr>
    <tr>
        <td style="vertical-align: top">userAgentSuffix</td>
        <td style="vertical-align: top;"><p style="word-wrap: break-word;margin: 0;">Sets the value to be appended to the user-agent header, this is used for monitoring purposes</p></td>
        <td style="vertical-align: top">""</td>
        <td style="vertical-align: top">any String value</td>
    </tr>
    <tr>
        <td style="vertical-align: top">MaxRetryAttemptsOnThrottledRequests</td>
        <td style="vertical-align: top;"><p style="word-wrap: break-word;margin: 0;">Sets the maximum number of retries in the case where the request fails because the service has applied rate limiting on the client. The default value is 9. This means in the case where the request is throttled, the same request will be issued for a maximum of 10 times to the server before an error is returned to the application.</p></td>
        <td style="vertical-align: top">9</td>
        <td style="vertical-align: top">any positive integer</td>
    </tr>
    <tr>
        <td style="vertical-align: top">MaxRetryWaitTimeInSeconds</td>
        <td style="vertical-align: top;"><p style="word-wrap: break-word;margin: 0;">Sets the maximum retry time in seconds. When a request fails due to a throttle error, the service sends back a response that contains a value indicating the client should not retry before the time period has elapsed (Retry-After). The MaxRetryWaitTime flag allows the application to set a maximum wait time for all retry attempts.</p></td>
        <td style="vertical-align: top">30</td>
        <td style="vertical-align: top">any positive integer</td>
    </tr>
    <tr>
        <td style="vertical-align: top">enableEndpointDiscovery</td>
        <td style="vertical-align: top;"><p style="word-wrap: break-word;margin: 0;">Sets the flag to enable endpoint discovery for geo-replicated database accounts. When EnableEndpointDiscovery is true, the extension will automatically discover the current write and read regions to ensure requests are sent to the correct region based on the capability of the region and the user's preference.</p></td>
        <td style="vertical-align: top">true</td>
        <td style="vertical-align: top">true<br>false</td>
    </tr>
    <tr>
        <td style="vertical-align: top">preferredLocations</td>
        <td style="vertical-align: top;"><p style="word-wrap: break-word;margin: 0;">Sets the preferred locations for geo-replicated database accounts. For example, "East US" as the preferred location. If EnableEndpointDiscovery is set to false, this property is ignored.</p></td>
        <td style="vertical-align: top">null</td>
        <td style="vertical-align: top">list of valid locations</td>
    </tr>
    <tr>
        <td style="vertical-align: top">usingMultipleWriteLocations</td>
        <td style="vertical-align: top;"><p style="word-wrap: break-word;margin: 0;">Sets the value to enable writes on any locations (regions) for geo-replicated database accounts. When the value of this property is true, the SDK will direct write operations to available writable locations of geo-replicated database account. Writable locations are ordered by PreferredLocations property. Setting the property value to true has no effect until EnableMultipleWriteLocations in DatabaseAccount is also set to true.</p></td>
        <td style="vertical-align: top">false</td>
        <td style="vertical-align: top">true<br>false</td>
    </tr>
    <tr>
        <td style="vertical-align: top">handleServiceUnavailableFromProxy</td>
        <td style="vertical-align: top;"><p style="word-wrap: break-word;margin: 0;">Sets the value to handle service unavailable errors returned without a service version header, by a proxy. When the value of this property is true, the extension will handle it as a known error and perform retries.</p></td>
        <td style="vertical-align: top">false</td>
        <td style="vertical-align: top">true<br>false</td>
    </tr>
    <tr>
        <td style="vertical-align: top">consistencyLevel</td>
        <td style="vertical-align: top;"><p style="word-wrap: break-word;margin: 0;">Represents the consistency levels supported for Azure Cosmos DB client operations in the Azure Cosmos DB database service. The requested ConsistencyLevel must match or be weaker than that provisioned for the database account. Consistency levels by order of strength are Strong, BoundedStaleness, Session and Eventual.</p></td>
        <td style="vertical-align: top">Session</td>
        <td style="vertical-align: top">Strong<br>BoundedStaleness<br>Session<br>Eventual<br>ConsistentPrefix</td>
    </tr>
</table>

<span id="examples" class="md-typeset" style="display: block; font-weight: bold;">Examples</span>
<span id="example-1" class="md-typeset" style="display: block; color: rgba(0, 0, 0, 0.54); font-size: 12.8px; font-weight: bold;">EXAMPLE 1</span>
```
@Store(type="cosmosdb",uri="https://myCosmosDBName.documents.azure.com:443", 
access.key= 'access key generated by the Cosmos DB', 
 database.name="admin") 
define table FooTable (symbol string, price float, volume long);
```
<p></p>
<p style="word-wrap: break-word;margin: 0;">The above example creates an event table named 'FooTable' in the database if it does not already exist (with three attributes named 'symbol', 'price', and 'volume' of the types 'string', 'float', and 'long' respectively). The connection is made as specified by the parameters configured for the '@Store' annotation.</p>
<p></p>
<span id="example-2" class="md-typeset" style="display: block; color: rgba(0, 0, 0, 0.54); font-size: 12.8px; font-weight: bold;">EXAMPLE 2</span>
```
@Store(type="cosmosdb",uri="https://myCosmosDBName.documents.azure.com:443", 
access.key= 'access key generated by the Cosmos DB', 
 database.name="admin") 
define table FooTable (symbol string, price float, volume long);
define stream InputStream (symbol string, volume long);
from InputStream as a join FooTable as b on str:contains(b.symbol, a.symbol)
select a.symbol as symbol, b.volume as volume
insert into FooStream;
```
<p></p>
<p style="word-wrap: break-word;margin: 0;">The above example creates an event table named 'FooTable' in the database if it does not already exist (with three attributes named 'symbol', 'price', and 'volume' of the types 'string', 'float' and 'long' respectively). Then the table is joined with a stream named 'InputStream' based on a condition. The following operations are included in the condition:<br>[ AND, OR, Comparisons( &lt;  &lt;=  &gt;  &gt;=  == !=), IS NULL, NOT, str:contains(Table&lt;Column&gt;, Stream&lt;Attribute&gt; or Search.String)]</p>
<p></p>
<span id="example-3" class="md-typeset" style="display: block; color: rgba(0, 0, 0, 0.54); font-size: 12.8px; font-weight: bold;">EXAMPLE 3</span>
```
@Store(type="cosmosdb",uri="https://myCosmosDBName.documents.azure.com:443", 
access.key= 'access key generated by the Cosmos DB', 
 database.name="admin") 
define table FooTable (symbol string, price float, volume long);
define stream deleteStream (symbol string);
from deleteStream 
delete FooTable 
on FooTable.symbol == symbol ;
```
<p></p>
<p style="word-wrap: break-word;margin: 0;">The above example creates an event table named 'FooTable' in the database if it does not already exist (with three attributes named 'symbol', 'price', and 'volume' of the types 'string', 'float' and 'long' respectively). Then documents in the FooTable which match the 'symbol' given in 'deleteStream', are deleted.</p>
<p></p>
<span id="example-4" class="md-typeset" style="display: block; color: rgba(0, 0, 0, 0.54); font-size: 12.8px; font-weight: bold;">EXAMPLE 4</span>
```
@Store(type="cosmosdb",uri="https://myCosmosDBName.documents.azure.com:443", 
access.key= 'access key generated by the Cosmos DB', 
 database.name="admin") 
define table FooTable (symbol string, price float, volume long);
define stream updateStream (symbol string, price float);
from updateStream 
update FooTable 
on FooTable.symbol == symbol ;
```
<p></p>
<p style="word-wrap: break-word;margin: 0;">The above example creates an event table named 'FooTable' in the database if it does not already exist (with three attributes named 'symbol', 'price', and 'volume' of the types 'string', 'float' and 'long' respectively). Then documents in the FooTable which match the 'symbol' given in 'updateStream', are updated with values given in the 'updateStream'.</p>
<p></p>
<span id="example-5" class="md-typeset" style="display: block; color: rgba(0, 0, 0, 0.54); font-size: 12.8px; font-weight: bold;">EXAMPLE 5</span>
```
@Store(type="cosmosdb",uri="https://myCosmosDBName.documents.azure.com:443", 
access.key= 'access key generated by the Cosmos DB', 
 database.name="admin") 
define table FooTable (symbol string, price float, volume long);
define stream updateOrInsertStream (symbol string, price float);
from updateOrInsertStream 
update or insert into FooTable 
on FooTable.symbol == symbol ;
```
<p></p>
<p style="word-wrap: break-word;margin: 0;">The above example creates an event table named 'FooTable' in the database if it does not already exist (with three attributes named 'symbol', 'price', and 'volume' of the types 'string', 'float' and 'long' respectively). Then documents in the FooTable which match the 'symbol' given in 'updateOrInsertStream', are updated with values given in the 'updateOrInsertStream'. If there are no matching documents, new documents are created with the given values.</p>
<p></p>
<span id="example-6" class="md-typeset" style="display: block; color: rgba(0, 0, 0, 0.54); font-size: 12.8px; font-weight: bold;">EXAMPLE 6</span>
```
@Store(type="cosmosdb",uri="https://myCosmosDBName.documents.azure.com:443", 
access.key= 'access key generated by the Cosmos DB', 
 database.name="admin") 
define table FooTable (symbol string, price float, volume long);
@sink(type='log')
define stream logStream(symbol string, price float); 
define stream searchStream (symbol string, price float);
from searchStream as s join FooTable as t 
on s.price == t.price 
select t.symbol, t.price 
 having t.volume > 100order by t.symbol ascinsert into logStream;
```
<p></p>
<p style="word-wrap: break-word;margin: 0;">The above example creates an event table named 'FooTable' in the database if it does not already exist (with three attributes named 'symbol', 'price', and 'volume' of the types 'string', 'float' and 'long' respectively). Then documents in the FooTable which match the 'price' given in 'searchStream' and having 'volume' greater than 100 are selected. From these documents, 'symbol' and 'price' attributes are selected, sorted in ascending order according to the 'symbol' attribute values and inserted into the logStream.</p>
<p></p>
<span id="example-7" class="md-typeset" style="display: block; color: rgba(0, 0, 0, 0.54); font-size: 12.8px; font-weight: bold;">EXAMPLE 7</span>
```
@Store(type="cosmosdb",uri="https://myCosmosDBName.documents.azure.com:443", 
access.key= 'access key generated by the Cosmos DB', 
 database.name="admin") 
define table FooTable (symbol string, price float, volume long);
@sink(type='log')
define stream logStream(symbol string, price float); 
define stream containsStream (symbol string, price float);
from containsStream 
[(FooTable.symbol == symbol and FooTable.price == price) in FooTable] 
insert into logStream;
```
<p></p>
<p style="word-wrap: break-word;margin: 0;">The above example creates an event table named 'FooTable' in the database if it does not already exist (with three attributes named 'symbol', 'price', and 'volume' of the types 'string', 'float' and 'long' respectively). Then if there are documents in the FooTable which match the 'symbol' and 'price' given in 'containsStream', those attribute values are inserted into the logStream.</p>
<p></p>
